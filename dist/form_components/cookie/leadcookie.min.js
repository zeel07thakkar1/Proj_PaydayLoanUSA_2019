"use strict";function listen(e,t,n,r){return"undefined"==typeof r&&(r=!0),!!e&&void(document.addEventListener?e.addEventListener(t,n,r):e.attachEvent("on"+t,n))}function utilAjax(e,t,n){var r=new XMLHttpRequest,o=n?"POST":"GET";r.open(o,e,!0),n&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){4===r.readyState&&200===r.status&&t(this.responseText)},r.send(n)}function utilSize(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}function UtilExtend(e,t){var n,r;n={};for(r in e)n[r]=e[r];for(r in t)n[r]=t[r];return n}function my_proxy(e,t){if("function"==typeof e)return t||(t=this),function(){return e.apply(t,arguments)}}function getFormData(e,t){for(var n=t.querySelectorAll("[name]"),r={},o=0;o<n.length;++o){var i=n[o],a=i.getAttribute("type"),s=i.getAttribute("name"),c=null;switch(a){case"checkbox":c=i.checked;break;case"image":c=i.getAttribute("src");break;case"radio":c=document.querySelector("input[name='"+s+"']:checked").value;break;case"button":case"text":case"url":case"date":case"color":case"datetime":case"datetime-local":case"email":case"file":case"hidden":case"month":case"number":case"password":case"range":case"search":case"submit":case"tel":case"time":case"week":default:c=i.value}r[s]=c}if(!e)return r;e="";for(var u in r)e+=encodeURIComponent(u)+"="+encodeURIComponent(r[u])+"&";return e=e.substr(0,e.length-1)}var LeadCookie={storage:cookieStorageIE,cookieName:void 0,handlerUrl:void 0,listeners:{preUpdate:[],preForcedQuit:[],postUpdate:[]},init:function(e,t){this.handlerUrl=e,this.cookieName=t},update:function(){var e,t,n,r,o,i={};if(this.trigEvent("preUpdate"),this.hasCookie()&&0===window.location.search.length&&this.checkRefferer())return void this.trigEvent("preForcedQuit");e=decodeURIComponent(window.location.search.replace(/\+/g,"%20")).substr(1).split("&");for(t in e)if(e.hasOwnProperty(t)){if(n=e[t].split("="),n[0].length<1)break;for(r=[],o=1;o<n.length;o++)r.push(n[o]);i[n[0]]=r.join("=")}this.sendRequest(i)},sendRequest:function(e){var t,n,r=this,o=this.handlerUrl+"?",i=0;e.version=(new Date).getTime(),e.httpReferrer=encodeURIComponent(document.referrer),t=utilSize(e);for(n in e)e.hasOwnProperty(n)&&(i++,o+=n+"="+e[n],t!==i&&(o+="&"));utilAjax(o,function(e){r.trigEvent("postUpdate")})},trigEvent:function(e){var t;if(!this.listeners.hasOwnProperty(e))throw new Error("Can't trig \""+e+'" event. Not allowed!');for(t=0;t<this.listeners[e].length;t++)this.listeners[e][t].call()},hasCookie:function(){return null!==cookieStorageIE.getItem(this.cookieName)},getEventListeners:function(e){return this.listeners[e]},addEventListener:function(e,t){if(!this.listeners.hasOwnProperty(e))throw new Error("Can't add \""+e+'" event. Not allowed!');if("function"!=typeof t)throw new Error('LeadCookie.addEventListener expect a valid callback. "'+typeof t+'" given!');this.listeners[e].push(t)},checkRefferer:function(){var e=document.location.href.match(/https?:\/\/[^\/]+/)[0];return 0===document.referrer.length||0===document.referrer.search(e)}},cookieStorageIE={getItem:function(e){var t=" "+document.cookie,n=" "+e+"=",r=null,o=0,i=0;return t.length>0&&(o=t.indexOf(n),o!=-1&&(o+=n.length,i=t.indexOf(";",o),i==-1&&(i=t.length),r=unescape(t.substring(o,i)))),r},setItem:function(e,t){var n,r,o="",i=[e+"="+escape(t)],a="/",s="",c=!1;for(r in n={expires:o,path:a,domain:s})n[r]&&i.push(r+"="+n[r]);return c&&i.push("secure"),document.cookie=i.join(";"),!0}};